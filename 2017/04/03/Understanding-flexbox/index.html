<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="CSS3," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="关于flexbox的基本内容就不在这里赘述了，这里只介绍flebox里一些容易造成困扰的地方。
拉伸的情况flex-basis的规范如下：

The flex-basis property sets the flex basis. It accepts the same values as the width and height property, plus content.For all va">
<meta property="og:type" content="article">
<meta property="og:title" content="Understanding flexbox">
<meta property="og:url" content="http://yoursite.com/2017/04/03/Understanding-flexbox/index.html">
<meta property="og:site_name" content="微胖の君的Blog">
<meta property="og:description" content="关于flexbox的基本内容就不在这里赘述了，这里只介绍flebox里一些容易造成困扰的地方。
拉伸的情况flex-basis的规范如下：

The flex-basis property sets the flex basis. It accepts the same values as the width and height property, plus content.For all va">
<meta property="og:image" content="http://yoursite.com/./img/Understanding flexbox-5.png">
<meta property="og:image" content="http://yoursite.com/./img/Understanding flexbox-6.png">
<meta property="og:image" content="http://yoursite.com/./img/Understanding flexbox-7.png">
<meta property="og:image" content="http://yoursite.com/./img/Understanding flexbox-1.png">
<meta property="og:image" content="http://yoursite.com/./img/Understanding flexbox-2.png">
<meta property="og:updated_time" content="2017-04-03T15:40:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Understanding flexbox">
<meta name="twitter:description" content="关于flexbox的基本内容就不在这里赘述了，这里只介绍flebox里一些容易造成困扰的地方。
拉伸的情况flex-basis的规范如下：

The flex-basis property sets the flex basis. It accepts the same values as the width and height property, plus content.For all va">
<meta name="twitter:image" content="http://yoursite.com/./img/Understanding flexbox-5.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/03/Understanding-flexbox/"/>





  <title> Understanding flexbox | 微胖の君的Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">微胖の君的Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">看起来不胖而已~~~</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/03/Understanding-flexbox/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="微胖の君">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="微胖の君的Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="微胖の君的Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Understanding flexbox
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-03T17:12:41+08:00">
                2017-04-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CSS3/" itemprop="url" rel="index">
                    <span itemprop="name">CSS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>关于<code>flexbox</code>的基本内容就不在这里赘述了，这里只介绍<code>flebox</code>里一些容易造成困扰的地方。</p>
<h2 id="拉伸的情况"><a href="#拉伸的情况" class="headerlink" title="拉伸的情况"></a>拉伸的情况</h2><p><code>flex-basis</code>的规范如下：</p>
<blockquote>
<p>The flex-basis property sets the flex basis. It accepts the same values as the width and height property, plus content.<br>For all values other than auto and content (defined above), flex-basis is resolved the same way as width in horizontal writing modes [CSS21], except that if a value would resolve to auto for width, it instead resolves to content for flex-basis. For example, percentage values of flex-basis are resolved against the flex item’s containing block (i.e. its flex container); and if that containing block’s size is indefinite, the used value for flex-basis is content. As another corollary, flex-basis determines the size of the content box, unless otherwise specified such as by box-sizing [CSS3UI].</p>
</blockquote>
<a id="more"></a>
<p>If a flex-basis is not set, or if it is set to ‘auto’, it will equal the initial size of the element. In other words, it will be the width of its inner content.</p>
<p><code>flex-basis</code>的值就是item的<code>content width</code>值！</p>
<p>看下面的例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">        .flex &#123;</div><div class="line">            /* 基本样式 */</div><div class="line">            width: 350px;</div><div class="line">            height: 200px;</div><div class="line">            border: 1px solid #555;</div><div class="line">            font: 14px Arial;</div><div class="line"></div><div class="line">            /*  建立弹性框 */</div><div class="line">            display: -webkit-flex;</div><div class="line">            -webkit-flex-direction: row;</div><div class="line">            display: flex;</div><div class="line">            flex-direction: row;</div><div class="line"></div><div class="line">            background: gray;</div><div class="line">        &#125;</div><div class="line">        /* colors */</div><div class="line">        .flex &gt; div:nth-child(1) &#123;</div><div class="line">            background : #009246;</div><div class="line">        &#125;</div><div class="line">        .flex &gt; div:nth-child(2) &#123;</div><div class="line">			margin: 0 10px;</div><div class="line">            padding: 0 10px;</div><div class="line">            border: 5px solid black;</div><div class="line">            background : #F1F2F1;</div><div class="line">        &#125;</div><div class="line">        .flex &gt; div:nth-child(3) &#123;</div><div class="line">            background : #CE2B37;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flex"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>uno<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>due<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>tre<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="./img/Understanding flexbox-5.png" alt=""></p>
<p>由于每个item没有设置flex属性，使用默认值<code>0 1 auto</code>，表示<code>flex-grow</code>为0，<code>flex-shrink</code>为1，<code>flex-basis</code>为auto。由于每个item没有设置<code>width</code>，那么其宽度由内容撑开，<code>flex-basis</code>的值为该item的<code>content width</code>，分别是24px，24px，17px。尽管存在剩余空间，但是每个item的<code>flex-grow</code>为0，表示不参与剩余空间的分配，所以不会进行拉伸。</p>
<p>为每个item设置<code>flex: 1 1 auto;</code>，代码如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flex</span> &#123;</div><div class="line">    <span class="comment">/* 基本样式 */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</div><div class="line">    <span class="attribute">font</span>: <span class="number">14px</span> Arial;</div><div class="line"></div><div class="line">    <span class="comment">/*  建立弹性框 */</span></div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">    <span class="attribute">-webkit-flex-direction</span>: row;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: row;</div><div class="line"></div><div class="line">    <span class="attribute">background</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* colors */</span></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#009246</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">	<span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">5px</span> solid black;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#F1F2F1</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#CE2B37</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="./img/Understanding flexbox-6.png" alt=""></p>
<p>每个item的<code>flex-basis</code>分别为24px，24px，17px。</p>
<p>接下来开始计算容器内的<code>Available space</code>。容器宽度为350px，减去3个item的<code>flex-basis</code>的值，再减去item2的左右<code>margin</code>、<code>padding</code>和<code>border</code>，那么剩余空间为<code>350px - (24px + 24px + 17px + 10px + 10px + 10px + 10px + 5px + 5px) = 235px</code>，是一个正值，表示空间有剩余。</p>
<p>接下来计算<code>Grow unit</code>，表示一个分配单元的大小，为<code>235px / (1 + 1 + 1) = 78.3333333px</code>。</p>
<p>接下来计算每个item的<code>Flex item size</code>值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item1: 24px + 1 * 78.3333333 = 102.3333333px</div><div class="line">item2: 24px + 1 * 78.3333333 = 102.3333333px</div><div class="line">item3: 17px + 1 * 78.3333333 = 95.3333333px</div></pre></td></tr></table></figure></p>
<p>当给item2设置<code>box-sizing</code>为<code>border-box</code>时，结果是一样的，因为它们的<code>flex-basis</code>值没有变。</p>
<p>如果给每一个item设置一个<code>width</code>，那么情况又有所不同。在<code>box-sizing</code>为<code>content-box</code>时，比如下面这样：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flex</span> &#123;</div><div class="line">    <span class="comment">/* 基本样式 */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</div><div class="line">    <span class="attribute">font</span>: <span class="number">14px</span> Arial;</div><div class="line"></div><div class="line">    <span class="comment">/*  建立弹性框 */</span></div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">    <span class="attribute">-webkit-flex-direction</span>: row;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: row;</div><div class="line"></div><div class="line">    <span class="attribute">background</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* colors */</span></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#009246</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">5px</span> solid black;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#F1F2F1</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#CE2B37</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>每个item的<code>flex-basis</code>都为30px，<code>Available space</code>值为<code>350px - (30px + 30px + 30px + 10px + 10px + 10px + 10px + 5px + 5px) = 210px</code>，<code>Grow unit</code>为<code>210px / (1 + 1 + 1) = 70px</code>，每个item的<code>Flex item size</code>值都为100px。</p>
<p>当给item2设置<code>box-sizing</code>为<code>border-box</code>时，代码如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flex</span> &#123;</div><div class="line">    <span class="comment">/* 基本样式 */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</div><div class="line">    <span class="attribute">font</span>: <span class="number">14px</span> Arial;</div><div class="line"></div><div class="line">    <span class="comment">/*  建立弹性框 */</span></div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">    <span class="attribute">-webkit-flex-direction</span>: row;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: row;</div><div class="line"></div><div class="line">    <span class="attribute">background</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">width</span>: <span class="number">30px</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* colors */</span></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#009246</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">    <span class="attribute">box-sizing</span>: border-box;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">5px</span> solid black;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#F1F2F1</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#CE2B37</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>差别就在item2的<code>flex-basis</code>，由于item2设置了<code>width</code>，且<code>box-sizing</code>为<code>border-box</code>，所以它的<code>width</code>包含了<code>padding</code>和<code>border</code>，所以它的<code>flex-basis</code>变为了<code>30px - 10px - 10px - 5px - 5px = 0px</code>，</p>
<p><img src="./img/Understanding flexbox-7.png" alt=""></p>
<p><code>Available space</code>值为<code>350px - (30px + 30px + 0px + 10px + 10px + 10px + 10px + 5px + 5px) = 240px</code>，<code>Grow unit</code>为<code>240px / (1 + 1 + 1) = 80px</code>，item1和item3的<code>Flex item size</code>值都为110px，item2的<code>Flex item size</code>值为80px，恰好就是其<code>content width</code>。</p>
<p>再看一个小例子，给每个item设置<code>width</code>为40px，且鼠标移到某个item上它的<code>width</code>会被设置为200px：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flex</span> &#123;</div><div class="line">    <span class="comment">/* 基本样式 */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</div><div class="line">    <span class="attribute">font</span>: <span class="number">14px</span> Arial;</div><div class="line"></div><div class="line">    <span class="comment">/*  建立弹性框 */</span>  </div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">    <span class="attribute">-webkit-flex-direction</span>: row;</div><div class="line"></div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: row;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">width</span>: <span class="number">40px</span>; </div><div class="line"></div><div class="line">    <span class="attribute">-webkit-transition</span>: width <span class="number">0.7s</span> ease-out;</div><div class="line">    <span class="attribute">transition</span>: width <span class="number">0.7s</span> ease-out;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* colors */</span></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#009246</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#F1F2F1</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#CE2B37</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面的例子中，每一个item的<code>flex-basis</code>都为auto，<code>box-sizing</code>为<code>content-box</code>，且没有左右<code>margin</code>和<code>padding</code>，所以它的值为每个<br>item设置的<code>width</code>值，这里为40px。</p>
<p>接下来开始计算容器内的<code>Available space</code>。容器宽度为350px，减去3个item的<code>flex-basis</code>的值，那么剩余空间为<code>350px - (40px + 40px + 40px) = 230px</code>，是一个正值，表示空间有剩余，<code>flex-grow</code>就是item用来“瓜分”这些剩余空间的“工具”。</p>
<p>接下来计算<code>Grow unit</code>，表示一个分配单元的大小，为<code>230px / (1 + 1 + 1) =  76.6666666px</code>。</p>
<p>接下来计算每个item的实际<code>width</code>值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item1: 40px + 1 * 76.6666666 = 116.6666666px</div><div class="line">item2: 40px + 1 * 76.6666666 = 116.6666666px</div><div class="line">item3: 40px + 1 * 76.6666666 = 116.6666666px</div></pre></td></tr></table></figure></p>
<p>最终结果就是三个item的宽度相等。</p>
<p><img src="./img/Understanding flexbox-1.png" alt=""></p>
<p>当鼠标移到某个item上去时，假设为item3，它的宽度变为200px，由于<code>flex-basis</code>为auto，所以item3的<code>flex-basis</code>的值就为200px。其它的item的<code>flex-basis</code>的值仍为40px。</p>
<p>接下来开始计算容器内的<code>Available space</code>。容器宽度为350px，减去3个item的<code>flex-basis</code>的值，那么剩余空间为<code>350px - (40px + 40px + 200px) = 70px</code>，是一个正值，表示空间有剩余。</p>
<p>接下来计算<code>Grow unit</code>，为<code>70px / (1 + 1 + 1) =  23.3333333px</code>。</p>
<p>接下来计算每个item的实际<code>width</code>值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">item 1: 40px + 1 * 23.3333333 = 63.3333333px</div><div class="line">item 2: 40px + 1 * 23.3333333 = 63.3333333px</div><div class="line">item 3: 200px + 1 * 23.3333333 = 223.3333333px</div></pre></td></tr></table></figure></p>
<p>最终结果如下：<br><img src="./img/Understanding flexbox-2.png" alt=""></p>
<h3 id="存在剩余空间的情况下应用的公式"><a href="#存在剩余空间的情况下应用的公式" class="headerlink" title="存在剩余空间的情况下应用的公式"></a>存在剩余空间的情况下应用的公式</h3><p>无论<code>box-sizing</code>为<code>content-box</code>还是<code>border-box</code>，只要存在剩余空间，那么就只会应用<code>flex-grow</code>，不会使用<code>flex-shrink</code>，有以下公式：</p>
<blockquote>
<p><code>Available space = (container size - flex-basis siblings total - every item margin - every item padding - every item border)</code></p>
<p><code>Grow unit = (Available space / Sum Grow siblings total)</code></p>
<p><code>Flex item size = (Flex basis + (Grow Unit * num))</code></p>
</blockquote>
<p><code>Flex item size</code>其实就是item的<code>content width</code>。</p>
<h2 id="压缩的情况"><a href="#压缩的情况" class="headerlink" title="压缩的情况"></a>压缩的情况</h2><p>先看一个例子：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.flex</span> &#123;</div><div class="line">    <span class="comment">/* 基本样式 */</span></div><div class="line">    <span class="attribute">width</span>: <span class="number">350px</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#555</span>;</div><div class="line">    <span class="attribute">font</span>: <span class="number">14px</span> Arial;</div><div class="line"></div><div class="line">    <span class="comment">/*  建立弹性框 */</span></div><div class="line">    <span class="attribute">display</span>: -webkit-flex;</div><div class="line">    <span class="attribute">-webkit-flex-direction</span>: row;</div><div class="line">    <span class="attribute">display</span>: flex;</div><div class="line">    <span class="attribute">flex-direction</span>: row;</div><div class="line"></div><div class="line">    <span class="attribute">background</span>: gray;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* colors */</span></div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</div><div class="line">    <span class="attribute">-webkit-flex</span>: <span class="number">1</span> <span class="number">1</span> auto;</div><div class="line">    <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">2</span> auto;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#009246</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</div><div class="line">    <span class="attribute">border</span>: <span class="number">5px</span> solid black;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#F1F2F1</span>;</div><div class="line">&#125;</div><div class="line"><span class="selector-class">.flex</span> &gt; <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</div><div class="line">    <span class="attribute">background </span>: <span class="number">#CE2B37</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在<code>box-sizing</code>为<code>content-box</code>的情况下，每个item的<code>flex-basis</code>为120px，计算<code>Available space</code>为<code>350px - (120px + 120px + 120px + 10px + 10px + 10px + 10px + 5px + 5px) = -60px</code>，为一个负值，表示每个item都需要进行压缩才能保证不会溢出。</p>
<p>先给出计算公式：</p>
<blockquote>
<p><code>Available space = container size - flex-basis siblings total - every item margin - every item padding - every item border</code></p>
<p><code>itemk shrink factor = (itemk flex-shrink * itemk flex-basis) /  item1 flex-shrink * item1 flex-basis + item2 flex-shrink * item2 flex-basis  + ... + itemk flex-shrink * itemk flex-basis + ... + itemN flex-shrink * itemN flex-basis</code></p>
<p><code>Flex itemk size = itemk flex-basis + itemk shrink factor * Available space</code></p>
</blockquote>
<p>根据计算公式，item1的<code>shrink factor</code>为<code>2 * 120 / 2 * 120 + 1 * 120 + 1 * 120 = 0.5</code>，item2的<code>shrink factor</code>为<code>1 * 120 / 2 * 120 + 1 * 120 + 1 * 120 = 0.25</code>，item3的<code>shrink factor</code>为<code>1 * 120 / 2 * 120 + 1 * 120 + 1 * 120 = 0.25</code></p>
<p>那么<code>Flex item1 size</code>为<code>120 + 0.5 * (-60) = 90px</code>，<code>Flex item2 size</code>为<code>120 + 0.25 * (-60) = 105px</code>，<code>Flex item3 size</code>为<code>120 + 0.25 * (-60) = 105px</code>。</p>
<p>给item2设置<code>box-sizing</code>为<code>border-box</code>的情况下，item2的<code>flex-basis</code>更新为<code>120px - 10px - 10px - 5px - 5px = 90px</code>。</p>
<p><code>Available space</code>为<code>350px - (120px + 90px + 120px + 10px + 10px + 10px + 10px + 5px + 5px) = -30px</code></p>
<p>根据计算公式，item1的<code>shrink factor</code>为<code>2 * 120 / 2 * 120 + 1 * 90 + 1 * 120 = 0.5333333</code>，item2的<code>shrink factor</code>为<code>1 * 90 / 2 * 120 + 1 * 90 + 1 * 120 = 0.2</code>，item3的<code>shrink factor</code>为<code>1 * 120 / 2 * 120 + 1 * 90 + 1 * 120 = 0.2666666</code>。</p>
<p>那么<code>Flex item1 size</code>为<code>120px + 0.5333333 * (-30) = 104px</code>，<code>Flex item2 size</code>为<code>90px + 0.2 * (-30) = 84px</code>，<code>Flex item3 size</code>为<code>120px + 0.2666666 * (-30) = 112px</code>。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><code>flex-basis</code>的值就是item的<code>content width</code>值！</li>
</ol>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.tuicool.com/articles/auMrArU" target="_blank" rel="external">flex-grow 不易理解，难道不是吗?</a><br><a href="https://chriswrightdesign.com/experiments/flexbox-adventures/" target="_blank" rel="external">Flexbox adventures</a><br><a href="https://www.w3.org/TR/css-flexbox-1/#flex-basis-property" target="_blank" rel="external">flex-basis</a><br><a href="https://madebymike.com.au/writing/understanding-flexbox/" target="_blank" rel="external">Understanding flexbox</a><br><a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" target="_blank" rel="external">A Complete Guide to Flexbox</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/CSS3/" rel="tag"># CSS3</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/17/em还是rem/" rel="next" title="em还是rem">
                <i class="fa fa-chevron-left"></i> em还是rem
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="微胖の君" />
          <p class="site-author-name" itemprop="name">微胖の君</p>
           
              <p class="site-description motion-element" itemprop="description">胡编一通，乱写一气</p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Sakitama" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#拉伸的情况"><span class="nav-number">1.</span> <span class="nav-text">拉伸的情况</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#存在剩余空间的情况下应用的公式"><span class="nav-number">1.1.</span> <span class="nav-text">存在剩余空间的情况下应用的公式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩的情况"><span class="nav-number">2.</span> <span class="nav-text">压缩的情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">3.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考资料"><span class="nav-number">4.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">微胖の君</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
